on: [push]
name: linelint

jobs:
  linelint:
    runs-on: ubuntu-latest
    name: Check if all files end in newline
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Get changed files
        id: get_changed_files
        run: |
          changed_files=$(git diff master --name-status | cut -f2)
          echo "CHANGED_FILES=${changed_files}" >> $GITHUB_ENV
      
      - name: Linelint
        uses: fernandrone/linelint@0.0.4
        id: linelint
        with: 
          files: ${{ steps.get_changed_files.outputs.CHANGED_FILES }}